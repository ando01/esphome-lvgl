# =============================================================================
# SENSORS - Family Room State Synchronization
# =============================================================================
# Each sensor subscribes to a Home Assistant entity. When the entity's state
# changes, the sensor updates the matching button in lvgl.yaml so the display
# always reflects the true state of every device, even if it was changed via
# the HA app, a voice assistant, or an automation.
#
# SENSOR TYPES:
#   sensor (numeric)       - reads numbers like temperature, humidity, fan %
#   text_sensor            - reads string values like HVAC action
#   binary_sensor          - reads on/off state, updates button checked state
#   binary_sensor template - calculates a derived true/false from numeric data
#
# KEY PATTERNS:
#   trigger_on_initial_state: true  -> syncs button immediately on boot
#   checked: !lambda return x;      -> highlights button when entity is on
#   checked: !lambda return !x;     -> highlights button when entity is OFF
# =============================================================================


# =============================================================================
# NUMERIC SENSORS
# =============================================================================

sensor:

  # ---------------------------------------------------------------------------
  # Outside Temperature
  # ---------------------------------------------------------------------------
  # Source:  sensor.outside_temperature
  # Updates: "temperatures" label in the top bar ("68°F / 72°F")
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: sensor.outside_temperature
    id: outside_temperature
    on_value:
      - lvgl.label.update:
          id: temperatures
          text:
            format: "%.0f°F / %.0f°F"
            args: [ 'x', 'id(inside_temperature).state' ]

  # ---------------------------------------------------------------------------
  # Inside Temperature (Kitchen)
  # ---------------------------------------------------------------------------
  # Source:  sensor.kitchen_temperature
  # Updates: "temperatures" label in the top bar ("68°F / 72°F")
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: sensor.kitchen_temperature
    id: inside_temperature
    on_value:
      - lvgl.label.update:
          id: temperatures
          text:
            format: "%.0f°F / %.0f°F"
            args: [ 'id(outside_temperature).state', 'x' ]

  # ---------------------------------------------------------------------------
  # Thermostat Current Temperature
  # ---------------------------------------------------------------------------
  # Source:    climate.family_room_thermostat (attribute: current_temperature)
  # Updates:   current value label + small dot arc on the thermostat page.
  #            Also recalculates the delta/mask arcs (the orange gap fill).
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.family_room_thermostat
    id: fr_thermostat_current_temp
    attribute: current_temperature
    on_value:
      - lvgl.label.update:
          id: fr_therm_current_value
          text:
            format: "%.0f°F"
            args: [ 'x' ]
      - lvgl.arc.update:
          id: fr_therm_current_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: fr_therm_delta_arc
          value: !lambda |-
            float cur = x;
            float tgt = cur;
            if (id(fr_thermostat_target_temp).has_state()) {
              tgt = id(fr_thermostat_target_temp).state;
            }
            return (int)roundf(cur > tgt ? cur : tgt);
      - lvgl.arc.update:
          id: fr_therm_mask_arc
          value: !lambda |-
            float cur = x;
            float tgt = cur;
            if (id(fr_thermostat_target_temp).has_state()) {
              tgt = id(fr_thermostat_target_temp).state;
            }
            return (int)roundf(cur < tgt ? cur : tgt);

  # ---------------------------------------------------------------------------
  # Thermostat Target Temperature (setpoint)
  # ---------------------------------------------------------------------------
  # Source:    climate.family_room_thermostat (attribute: temperature)
  # Updates:   target label (large center text) + track arc + draggable dot arc.
  #            Also recalculates the delta/mask arcs.
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.family_room_thermostat
    id: fr_thermostat_target_temp
    attribute: temperature
    on_value:
      - lvgl.label.update:
          id: fr_therm_target_label
          text:
            format: "%.0f°F"
            args: [ 'x' ]
      - lvgl.arc.update:
          id: fr_therm_track_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: fr_therm_target_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: fr_therm_delta_arc
          value: !lambda |-
            float tgt = x;
            float cur = tgt;
            if (id(fr_thermostat_current_temp).has_state()) {
              cur = id(fr_thermostat_current_temp).state;
            }
            return (int)roundf(cur > tgt ? cur : tgt);
      - lvgl.arc.update:
          id: fr_therm_mask_arc
          value: !lambda |-
            float tgt = x;
            float cur = tgt;
            if (id(fr_thermostat_current_temp).has_state()) {
              cur = id(fr_thermostat_current_temp).state;
            }
            return (int)roundf(cur < tgt ? cur : tgt);

  # ---------------------------------------------------------------------------
  # Kitchen Thermostat Current Temperature
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.kitchen
    id: kt_thermostat_current_temp
    attribute: current_temperature
    on_value:
      - lvgl.label.update:
          id: kt_therm_current_value
          text:
            format: "%.0f°F"
            args: [ 'x' ]
      - lvgl.arc.update:
          id: kt_therm_current_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: kt_therm_delta_arc
          value: !lambda |-
            float cur = x;
            float tgt = cur;
            if (id(kt_thermostat_target_temp).has_state()) {
              tgt = id(kt_thermostat_target_temp).state;
            }
            return (int)roundf(cur > tgt ? cur : tgt);
      - lvgl.arc.update:
          id: kt_therm_mask_arc
          value: !lambda |-
            float cur = x;
            float tgt = cur;
            if (id(kt_thermostat_target_temp).has_state()) {
              tgt = id(kt_thermostat_target_temp).state;
            }
            return (int)roundf(cur < tgt ? cur : tgt);

  # ---------------------------------------------------------------------------
  # Kitchen Thermostat Target Temperature
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.kitchen
    id: kt_thermostat_target_temp
    attribute: temperature
    on_value:
      - lvgl.label.update:
          id: kt_therm_target_label
          text:
            format: "%.0f°F"
            args: [ 'x' ]
      - lvgl.arc.update:
          id: kt_therm_track_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: kt_therm_target_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: kt_therm_delta_arc
          value: !lambda |-
            float tgt = x;
            float cur = tgt;
            if (id(kt_thermostat_current_temp).has_state()) {
              cur = id(kt_thermostat_current_temp).state;
            }
            return (int)roundf(cur > tgt ? cur : tgt);
      - lvgl.arc.update:
          id: kt_therm_mask_arc
          value: !lambda |-
            float tgt = x;
            float cur = tgt;
            if (id(kt_thermostat_current_temp).has_state()) {
              cur = id(kt_thermostat_current_temp).state;
            }
            return (int)roundf(cur < tgt ? cur : tgt);

  # ---------------------------------------------------------------------------
  # All Thermostats Current Temperature
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.all_thermostats
    id: at_thermostat_current_temp
    attribute: current_temperature
    on_value:
      - lvgl.label.update:
          id: at_therm_current_value
          text:
            format: "%.0f°F"
            args: [ 'x' ]
      - lvgl.arc.update:
          id: at_therm_current_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: at_therm_delta_arc
          value: !lambda |-
            float cur = x;
            float tgt = cur;
            if (id(at_thermostat_target_temp).has_state()) {
              tgt = id(at_thermostat_target_temp).state;
            }
            return (int)roundf(cur > tgt ? cur : tgt);
      - lvgl.arc.update:
          id: at_therm_mask_arc
          value: !lambda |-
            float cur = x;
            float tgt = cur;
            if (id(at_thermostat_target_temp).has_state()) {
              tgt = id(at_thermostat_target_temp).state;
            }
            return (int)roundf(cur < tgt ? cur : tgt);

  # ---------------------------------------------------------------------------
  # All Thermostats Target Temperature (setpoint)
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.all_thermostats
    id: at_thermostat_target_temp
    attribute: temperature
    on_value:
      - lvgl.label.update:
          id: at_therm_target_label
          text:
            format: "%.0f°F"
            args: [ 'x' ]
      - lvgl.arc.update:
          id: at_therm_track_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: at_therm_target_arc
          value: !lambda return (int)roundf(x);
      - lvgl.arc.update:
          id: at_therm_delta_arc
          value: !lambda |-
            float tgt = x;
            float cur = tgt;
            if (id(at_thermostat_current_temp).has_state()) {
              cur = id(at_thermostat_current_temp).state;
            }
            return (int)roundf(cur > tgt ? cur : tgt);
      - lvgl.arc.update:
          id: at_therm_mask_arc
          value: !lambda |-
            float tgt = x;
            float cur = tgt;
            if (id(at_thermostat_current_temp).has_state()) {
              cur = id(at_thermostat_current_temp).state;
            }
            return (int)roundf(cur < tgt ? cur : tgt);

  # ---------------------------------------------------------------------------
  # Ceiling Fan Speed (percentage)
  # ---------------------------------------------------------------------------
  # Source:    fan.family_room_ceiling_fan (attribute: percentage)
  # Updates:   fr_fan_low_btn / fr_fan_med_btn / fr_fan_high_btn checked state
  #
  # Speed thresholds assume a 3-speed fan (33% / 66% / 100%).
  # If your fan uses different steps (e.g., 25/50/75/100 for 4-speed), update
  # the percentage values in both this file and in lvgl.yaml on_click actions.
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: fan.family_room_ceiling_fan
    id: fr_fan_percentage
    attribute: percentage
    on_value:
      - lvgl.widget.update:
          id: fr_fan_low_btn
          state:
            checked: !lambda return id(fr_fan_state).state && abs(x - 33.0f) <= 10.0f;
      - lvgl.widget.update:
          id: fr_fan_med_btn
          state:
            checked: !lambda return id(fr_fan_state).state && abs(x - 66.0f) <= 10.0f;
      - lvgl.widget.update:
          id: fr_fan_high_btn
          state:
            checked: !lambda return id(fr_fan_state).state && abs(x - 100.0f) <= 5.0f;

  # ---------------------------------------------------------------------------
  # Family Room Ceiling Light Brightness (0-255)
  # ---------------------------------------------------------------------------
  # Source:  light.family_room_ceiling_lights (attribute: brightness)
  # Updates: fr_ceiling_brightness_slider in lvgl.yaml
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: light.family_room_ceiling_lights
    id: fr_ceiling_brightness
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: fr_ceiling_brightness_slider
          value: !lambda return (int)x;

  # ---------------------------------------------------------------------------
  # Family Room Fireplace Light Brightness (0-255)
  # ---------------------------------------------------------------------------
  # Source:  light.family_room_fireplace_lights (attribute: brightness)
  # Updates: fr_fireplace_brightness_slider in lvgl.yaml
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: light.family_room_fireplace_lights
    id: fr_fireplace_brightness
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: fr_fireplace_brightness_slider
          value: !lambda return (int)x;

  # ---------------------------------------------------------------------------
  # Dining Room Ceiling Light Brightness (0-255)
  # ---------------------------------------------------------------------------
  # Source:  light.dining_room_ceiling_lights_node_5 (attribute: brightness)
  # Updates: dr_ceiling_brightness_slider in lvgl.yaml
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: light.dining_room_ceiling_lights_node_5
    id: dr_ceiling_brightness
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: dr_ceiling_brightness_slider
          value: !lambda return (int)x;

  # ---------------------------------------------------------------------------
  # Dining Room Table Light Brightness (0-255)
  # ---------------------------------------------------------------------------
  # Source:  light.dining_room_table_light_node_6 (attribute: brightness)
  # Updates: dr_table_brightness_slider in lvgl.yaml
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: light.dining_room_table_light_node_6
    id: dr_table_brightness
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: dr_table_brightness_slider
          value: !lambda return (int)x;

  # ---------------------------------------------------------------------------
  # Foyer Light Brightness (0-255)
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: light.foyer_light_node_13
    id: fo_foyer_brightness
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: fo_foyer_brightness_slider
          value: !lambda return (int)x;

  # ---------------------------------------------------------------------------
  # Deck Flood Light Brightness (0-255)
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: light.deck_flood_light
    id: dk_flood_brightness
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: dk_flood_brightness_slider
          value: !lambda return (int)x;

  # ---------------------------------------------------------------------------
  # Patio Wall Lights Brightness (0-255)
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: light.patio_wall_lights
    id: pt_wall_brightness
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: pt_wall_brightness_slider
          value: !lambda return (int)x;


# =============================================================================
# TEXT SENSORS (String Values)
# =============================================================================

text_sensor:

  # ---------------------------------------------------------------------------
  # Date & Time (Clock display)
  # ---------------------------------------------------------------------------
  # Source:  sensor.date_and_time
  # Updates: display_time label in the top bar
  # Expects a string containing "HH:MM" — handles both full datetime strings
  # ("2024-01-15 14:30:00") and bare time strings ("14:30").
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: sensor.date_and_time
    id: ha_date_and_time
    on_value:
      - lvgl.label.update:
          id: display_time
          text: !lambda |-
            if (x.length() >= 16) return x.substr(11, 5).c_str();
            if (x.length() >= 5)  return x.c_str();
            return "--:--";

  # ---------------------------------------------------------------------------
  # Family Room Thermostat HVAC Action
  # ---------------------------------------------------------------------------
  # Source:    climate.family_room_thermostat (attribute: hvac_action)
  # Updates:   fr_therm_mode_label on the thermostat page
  # Values:    heating / cooling / idle / off / fan
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.family_room_thermostat
    id: fr_thermostat_hvac_action
    attribute: hvac_action
    on_value:
      - lvgl.label.update:
          id: fr_therm_mode_label
          text: !lambda |-
            if (x == "heating") return "Heating";
            if (x == "cooling") return "Cooling";
            if (x == "idle") return "Idle";
            if (x == "off") return "Off";
            if (x == "fan") return "Fan";
            return x.c_str();

  # ---------------------------------------------------------------------------
  # All Thermostats HVAC Action
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.all_thermostats
    id: at_thermostat_hvac_action
    attribute: hvac_action
    on_value:
      - lvgl.label.update:
          id: at_therm_mode_label
          text: !lambda |-
            if (x == "heating") return "Heating";
            if (x == "cooling") return "Cooling";
            if (x == "idle") return "Idle";
            if (x == "off") return "Off";
            if (x == "fan") return "Fan";
            return x.c_str();

  # ---------------------------------------------------------------------------
  # Kitchen Thermostat HVAC Action
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    entity_id: climate.kitchen
    id: kt_thermostat_hvac_action
    attribute: hvac_action
    on_value:
      - lvgl.label.update:
          id: kt_therm_mode_label
          text: !lambda |-
            if (x == "heating") return "Heating";
            if (x == "cooling") return "Cooling";
            if (x == "idle") return "Idle";
            if (x == "off") return "Off";
            if (x == "fan") return "Fan";
            return x.c_str();


# =============================================================================
# SCRIPTS - Nav Button Highlight Updates
# =============================================================================
# Each script checks all light/fan entities for a room and sets the nav button
# checked state to orange if any are on, dark if all are off.
# Scripts are called by binary_sensor on_state handlers below.
# Thermostat sensors are intentionally excluded (active thermostat ≠ lights on).
# =============================================================================

script:

  - id: update_fr_nav
    then:
      - lvgl.widget.update:
          id: family_room_nav_btn
          state:
            checked: !lambda |-
              return id(fr_ceiling_lights_state).state ||
                     id(fr_lamps_state).state ||
                     id(fr_fireplace_state).state ||
                     id(fr_fan_state).state;

  - id: update_kt_nav
    then:
      - lvgl.widget.update:
          id: kitchen_nav_btn
          state:
            checked: !lambda |-
              return id(kt_ceiling_lights_state).state ||
                     id(kt_leds_state).state ||
                     id(kt_cabinet_leds_state).state ||
                     id(kt_island_state).state ||
                     id(kt_hall_state).state;

  - id: update_dr_nav
    then:
      - lvgl.widget.update:
          id: dining_room_nav_btn
          state:
            checked: !lambda |-
              return id(dr_ceiling_lights_state).state ||
                     id(dr_table_light_state).state;

  - id: update_lo_nav
    then:
      - lvgl.widget.update:
          id: lisas_office_nav_btn
          state:
            checked: !lambda |-
              return id(lo_light_state).state;

  - id: update_fo_nav
    then:
      - lvgl.widget.update:
          id: foyer_nav_btn
          state:
            checked: !lambda |-
              return id(fo_foyer_light_state).state;

  - id: update_dk_nav
    then:
      - lvgl.widget.update:
          id: deck_nav_btn
          state:
            checked: !lambda |-
              return id(dk_flood_light_state).state;

  - id: update_pt_nav
    then:
      - lvgl.widget.update:
          id: patio_nav_btn
          state:
            checked: !lambda |-
              return id(pt_wall_lights_state).state ||
                     id(pt_xmas_lights_state).state;


# =============================================================================
# BINARY SENSORS (On/Off States)
# =============================================================================
# When a sensor is ON (true)  -> button shows as checked (orange highlight)
# When a sensor is OFF (false) -> button shows as unchecked (dark)
# =============================================================================

binary_sensor:

  # ---------------------------------------------------------------------------
  # Ceiling Lights
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    id: fr_ceiling_lights_state
    entity_id: light.family_room_ceiling_lights
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: fr_ceiling_lights_btn
            state:
              checked: !lambda return x;
        - script.execute: update_fr_nav

  # ---------------------------------------------------------------------------
  # Lamps (group)
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    id: fr_lamps_state
    entity_id: light.family_room_lamps
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: fr_lamps_btn
            state:
              checked: !lambda return x;
        - script.execute: update_fr_nav

  # ---------------------------------------------------------------------------
  # Fireplace Lights
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    id: fr_fireplace_state
    entity_id: light.family_room_fireplace_lights
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: fr_fireplace_btn
            state:
              checked: !lambda return x;
        - script.execute: update_fr_nav

  # ---------------------------------------------------------------------------
  # Ceiling Fan (on/off)
  # Also drives the "Off" button on the fan sub-page (inverted state).
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    id: fr_fan_state
    entity_id: fan.family_room_ceiling_fan
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: fr_fan_btn
            state:
              checked: !lambda return x;
        - lvgl.widget.update:
            id: fr_fan_off_btn
            state:
              checked: !lambda return !x;
        - script.execute: update_fr_nav

  # ---------------------------------------------------------------------------
  # Thermostat Mode (on/off state for the room page button)
  # ---------------------------------------------------------------------------
  # State is true when hvac_mode is heat/cool/heat_cool (not "off").
  # The Thermostat button on the family room page shows orange when active.
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    id: fr_thermostat_state
    entity_id: climate.family_room_thermostat
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: fr_thermostat_btn
          state:
            checked: !lambda return x;

  # ---------------------------------------------------------------------------
  # All Thermostats Mode (on/off state — drives buttons on all room pages)
  # ---------------------------------------------------------------------------
  - platform: homeassistant
    id: at_thermostat_state
    entity_id: climate.all_thermostats
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: fr_all_thermostats_btn
            state:
              checked: !lambda return x;
        - lvgl.widget.update:
            id: kt_all_thermostats_btn
            state:
              checked: !lambda return x;

  # ===========================================================================
  # KITCHEN BINARY SENSORS
  # ===========================================================================

  - platform: homeassistant
    id: kt_ceiling_lights_state
    entity_id: light.kitchen_lights
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: kt_ceiling_lights_btn
            state:
              checked: !lambda return x;
        - script.execute: update_kt_nav

  - platform: homeassistant
    id: kt_leds_state
    entity_id: light.kitchen_leds
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: kt_leds_btn
            state:
              checked: !lambda return x;
        - script.execute: update_kt_nav

  - platform: homeassistant
    id: kt_cabinet_leds_state
    entity_id: light.kitchen_cabinet_leds
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: kt_cabinet_leds_btn
            state:
              checked: !lambda return x;
        - script.execute: update_kt_nav

  - platform: homeassistant
    id: kt_island_state
    entity_id: light.wled_kitchen_island
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: kt_island_btn
            state:
              checked: !lambda return x;
        - script.execute: update_kt_nav

  - platform: homeassistant
    id: kt_hall_state
    entity_id: light.kitchen_hall_light
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: kt_hall_btn
            state:
              checked: !lambda return x;
        - script.execute: update_kt_nav

  - platform: homeassistant
    id: kt_thermostat_state
    entity_id: climate.kitchen
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: kt_thermostat_btn
          state:
            checked: !lambda return x;

  # ===========================================================================
  # DINING ROOM BINARY SENSORS
  # ===========================================================================

  - platform: homeassistant
    id: dr_ceiling_lights_state
    entity_id: light.dining_room_ceiling_lights_node_5
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: dr_ceiling_lights_btn
            state:
              checked: !lambda return x;
        - script.execute: update_dr_nav

  - platform: homeassistant
    id: dr_table_light_state
    entity_id: light.dining_room_table_light_node_6
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: dr_table_light_btn
            state:
              checked: !lambda return x;
        - script.execute: update_dr_nav

  # ===========================================================================
  # LISA'S OFFICE BINARY SENSORS
  # ===========================================================================

  - platform: homeassistant
    id: lo_light_state
    entity_id: light.lisas_office_light
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: lo_light_btn
            state:
              checked: !lambda return x;
        - script.execute: update_lo_nav

  # ===========================================================================
  # FOYER BINARY SENSORS
  # ===========================================================================

  - platform: homeassistant
    id: fo_foyer_light_state
    entity_id: light.foyer_light_node_13
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: fo_foyer_light_btn
            state:
              checked: !lambda return x;
        - script.execute: update_fo_nav

  # ===========================================================================
  # DECK BINARY SENSORS
  # ===========================================================================

  - platform: homeassistant
    id: dk_flood_light_state
    entity_id: light.deck_flood_light
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: dk_flood_light_btn
            state:
              checked: !lambda return x;
        - script.execute: update_dk_nav

  # ===========================================================================
  # PATIO BINARY SENSORS
  # ===========================================================================

  - platform: homeassistant
    id: pt_wall_lights_state
    entity_id: light.patio_wall_lights
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: pt_wall_lights_btn
            state:
              checked: !lambda return x;
        - script.execute: update_pt_nav

  - platform: homeassistant
    id: pt_xmas_lights_state
    entity_id: light.patio_christmas_lights
    trigger_on_initial_state: true
    on_state:
      then:
        - lvgl.widget.update:
            id: pt_xmas_lights_btn
            state:
              checked: !lambda return x;
        - script.execute: update_pt_nav
