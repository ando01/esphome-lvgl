# =============================================================================
# LVGL TOUCHSCREEN INTERFACE - Family Room Dashboard
# =============================================================================
# PAGES:
#   main_page            - Home screen with room navigation buttons
#   family_room_page     - Family Room controls (3x3 grid)
#   family_room_fan_page - Fan speed controls sub-page
#
# HOW IT WORKS:
#   - Buttons send commands to Home Assistant when pressed (on_click)
#   - Button states (highlighted/dimmed) are updated by sensors in sensors.yaml
#   - The top layer shows time and temp/humidity on every page
# =============================================================================

lvgl:
  buffer_size: 100%
  top_layer:
    widgets:

      # =========================================================================
      # TEMP & HUMIDITY (Top-left)
      # Shows: "72°F / 45%"
      # Updated by: fr_room_temperature and fr_room_humidity sensors
      # =========================================================================
      - label:
          text: "--°F / --%"
          id: temperatures
          styles: roboto15_style
          align: top_left
          x: 8
          y: 4
          text_color: 0xFFFFFF

      # =========================================================================
      # CLOCK (Top-center)
      # Shows: "14:30" (updated every minute by addon/time.yaml)
      # =========================================================================
      - label:
          text: "--:--"
          id: display_time
          styles: roboto15_style
          align: top_mid
          x: 0
          y: 4
          text_align: center
          text_color: 0xFFFFFF

  pages:

    # ===========================================================================
    # HOME PAGE - Room Navigation
    # ===========================================================================
    # Tap a room button to navigate into that room's control page.
    # Add more room buttons here as you expand to other rooms.
    # ===========================================================================
    - id: main_page
      layout:
        type: flex
        flex_flow: row_wrap
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 39
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # -----------------------------------------------------------------------
        # BUTTON: Family Room
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: family_room_nav_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $home
              - label:
                  align: bottom_left
                  text: "Family Room"
            on_click:
              - lvgl.page.show: family_room_page

        # -----------------------------------------------------------------------
        # BUTTON: Kitchen
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: kitchen_nav_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $food
              - label:
                  align: bottom_left
                  text: "Kitchen"
            on_click:
              - lvgl.page.show: kitchen_page

        # -----------------------------------------------------------------------
        # BUTTON: Dining Room
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: dining_room_nav_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $table_chair
              - label:
                  align: bottom_left
                  text: "Dining Room"
            on_click:
              - lvgl.page.show: dining_room_page

        # -----------------------------------------------------------------------
        # BUTTON: Lisa's Office
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: lisas_office_nav_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $monitor
              - label:
                  align: bottom_left
                  text: "Lisa's Office"
            on_click:
              - lvgl.page.show: lisas_office_page

        # -----------------------------------------------------------------------
        # BUTTON: Foyer
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: foyer_nav_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $door_open
              - label:
                  align: bottom_left
                  text: "Foyer"
            on_click:
              - lvgl.page.show: foyer_page

        # -----------------------------------------------------------------------
        # BUTTON: Deck
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: deck_nav_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $deck
              - label:
                  align: bottom_left
                  text: "Deck"
            on_click:
              - lvgl.page.show: deck_page

        # -----------------------------------------------------------------------
        # BUTTON: Patio
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: patio_nav_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $flower
              - label:
                  align: bottom_left
                  text: "Patio"
            on_click:
              - lvgl.page.show: patio_page

    # ===========================================================================
    # FAMILY ROOM PAGE - Main Controls (3x3 grid)
    # ===========================================================================
    # [Ceiling~]       [Lamps]          [Fireplace~]
    # [Evening Lights] [Fan →]          [All Thermostats →]
    # [← Back]         [Thermostat→]    [All Lights Off]
    # ~ = has brightness slider
    # ===========================================================================
    - id: family_room_page
      layout:
        type: grid
        grid_columns: [fr(1), fr(1), fr(1)]
        grid_rows: [fr(1), fr(1), fr(1)]
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # -----------------------------------------------------------------------
        # [0,0] CEILING LIGHTS
        # Toggles: light.family_room_ceiling_lights
        # State:   fr_ceiling_lights_state (sensors.yaml)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_ceiling_lights_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  y: -16
                  text: "Ceiling"
              - slider:
                  id: fr_ceiling_brightness_slider
                  align: bottom_mid
                  width: 100%
                  height: 10px
                  min_value: 1
                  max_value: 255
                  value: 128
                  bg_color: 0x505050
                  indicator:
                    bg_color: 0xE5E5E5
                  knob:
                    bg_color: 0xE5E5E5
                    width: 18px
                    height: 18px
                    radius: 9px
                  on_release:
                    - homeassistant.service:
                        service: light.turn_on
                        data:
                          entity_id: light.family_room_ceiling_lights
                          brightness: !lambda return (int)x;
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.family_room_ceiling_lights

        # -----------------------------------------------------------------------
        # [1,0] LAMPS
        # Toggles: light.family_room_lamps
        # State:   fr_lamps_state (sensors.yaml)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_lamps_btn
            styles: control
            grid_cell_column_pos: 1
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $nightlight
              - label:
                  align: bottom_left
                  text: "Lamps"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.family_room_lamps

        # -----------------------------------------------------------------------
        # [2,0] FIREPLACE LIGHTS
        # Toggles: light.family_room_fireplace_lights
        # State:   fr_fireplace_state (sensors.yaml)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_fireplace_btn
            styles: control
            grid_cell_column_pos: 2
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $fire
              - label:
                  align: bottom_left
                  y: -16
                  text: "Fireplace"
              - slider:
                  id: fr_fireplace_brightness_slider
                  align: bottom_mid
                  width: 100%
                  height: 10px
                  min_value: 1
                  max_value: 255
                  value: 128
                  bg_color: 0x505050
                  indicator:
                    bg_color: 0xE5E5E5
                  knob:
                    bg_color: 0xE5E5E5
                    width: 18px
                    height: 18px
                    radius: 9px
                  on_release:
                    - homeassistant.service:
                        service: light.turn_on
                        data:
                          entity_id: light.family_room_fireplace_lights
                          brightness: !lambda return (int)x;
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.family_room_fireplace_lights

        # -----------------------------------------------------------------------
        # [0,1] EVENING LIGHTS
        # Triggers: automation.family_room_lights_on_with_scene_controller_button_1
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: fr_evening_lights_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 1
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $nightlight
              - label:
                  align: bottom_left
                  text: "Evening Lights"
            on_click:
              - homeassistant.service:
                  service: automation.trigger
                  data:
                    entity_id: automation.family_room_lights_on_with_scene_controller_button_1

        # -----------------------------------------------------------------------
        # [1,1] CEILING FAN  →  navigates to fan speed sub-page
        # Shown orange when fan is on (any speed).
        # State:   fr_fan_state (sensors.yaml)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_fan_btn
            styles: control
            grid_cell_column_pos: 1
            grid_cell_row_pos: 1
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $ceiling_fan
              - label:
                  align: bottom_left
                  text: "Fan"
            on_click:
              - lvgl.page.show: family_room_fan_page

        # -----------------------------------------------------------------------
        # [0,2] BACK to Home
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: fr_back_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page

        # -----------------------------------------------------------------------
        # [1,2] THERMOSTAT  →  thermostat control page
        # Shown orange when thermostat mode is not "off".
        # State:   fr_thermostat_state (sensors.yaml)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_thermostat_btn
            styles: control
            grid_cell_column_pos: 1
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $thermometer
              - label:
                  align: bottom_left
                  text: "Thermostat"
            on_click:
              - lvgl.page.show: family_room_thermostat_page

        # -----------------------------------------------------------------------
        # [2,1] ALL THERMOSTATS  →  thermostat control page
        # Shown orange when climate.all_thermostats mode is not "off".
        # State:   at_thermostat_state (sensors.yaml)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_all_thermostats_btn
            styles: control
            grid_cell_column_pos: 2
            grid_cell_row_pos: 1
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $thermometer
              - label:
                  align: bottom_left
                  text: "All Thermostats"
            on_click:
              - lvgl.page.show: all_thermostats_page

        # -----------------------------------------------------------------------
        # [2,2] ALL LIGHTS OFF
        # Turns off all lights in Home Assistant.
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: fr_all_lights_off_btn
            styles: control
            grid_cell_column_pos: 2
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  text: "All Lights Off"
            on_click:
              - homeassistant.service:
                  service: light.turn_off
                  data:
                    entity_id: all

    # ===========================================================================
    # FAN SPEED SUB-PAGE
    # ===========================================================================
    # [← Back]  [Off]    [Low]
    # [Medium]  [High]
    #
    # Speed buttons highlight to show the current active speed.
    # "Off" button highlights when the fan is off.
    # States driven by fr_fan_state + fr_fan_percentage in sensors.yaml.
    # ===========================================================================
    - id: family_room_fan_page
      layout:
        type: flex
        flex_flow: row_wrap
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # -----------------------------------------------------------------------
        # BACK to Family Room
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: fr_fan_back_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: family_room_page

        # -----------------------------------------------------------------------
        # FAN OFF
        # Highlighted when fan.family_room_ceiling_fan is off.
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_fan_off_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $power
              - label:
                  align: bottom_left
                  text: "Off"
            on_click:
              - homeassistant.service:
                  service: fan.turn_off
                  data:
                    entity_id: fan.family_room_ceiling_fan

        # -----------------------------------------------------------------------
        # FAN LOW (~33%)
        # Highlighted when fan is on and percentage is ~33%.
        # Adjust the percentage value if your fan uses different speed steps.
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_fan_low_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $fan
              - label:
                  align: bottom_left
                  text: "Low"
            on_click:
              - homeassistant.service:
                  service: fan.set_percentage
                  data:
                    entity_id: fan.family_room_ceiling_fan
                    percentage: "33"

        # -----------------------------------------------------------------------
        # FAN MEDIUM (~66%)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_fan_med_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $fan
              - label:
                  align: bottom_left
                  text: "Medium"
            on_click:
              - homeassistant.service:
                  service: fan.set_percentage
                  data:
                    entity_id: fan.family_room_ceiling_fan
                    percentage: "66"

        # -----------------------------------------------------------------------
        # FAN HIGH (100%)
        # -----------------------------------------------------------------------
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fr_fan_high_btn
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $fan
              - label:
                  align: bottom_left
                  text: "High"
            on_click:
              - homeassistant.service:
                  service: fan.set_percentage
                  data:
                    entity_id: fan.family_room_ceiling_fan
                    percentage: "100"

    # ===========================================================================
    # THERMOSTAT PAGE - Circular arc temperature control
    # ===========================================================================
    # Arc range is 60–85°F directly (no unit conversion needed for US thermostats).
    # The large white dot on the arc is the TARGET temperature (draggable).
    # The small white dot with orange border is the CURRENT temperature (read-only).
    # The orange arc fill shows the gap between current and target.
    #
    # NOTE: climate.set_temperature sets the setpoint for the current hvac_mode.
    # If your thermostat is in heat_cool mode it controls whichever setpoint is
    # active. For heat-only or cool-only mode this works perfectly.
    # ===========================================================================
    - id: family_room_thermostat_page
      layout:
        type: flex
        flex_flow: column
      scrollbar_mode: "off"
      width: 100%
      height: 100%
      bg_color: 0x1E1E1E
      bg_opa: cover

      widgets:
        - obj:
            id: fr_therm_root
            width: 100%
            height: 100%
            bg_opa: TRANSP
            border_width: 0
            pad_all: 0

            widgets:

              # Back button
              - button:
                  id: fr_therm_back_btn
                  width: 60px
                  height: 60px
                  x: 5
                  y: 34
                  styles: control
                  widgets:
                    - label:
                        text_font: $icon_font
                        align: center
                        text: $chevron_left
                  on_click:
                    - lvgl.page.show: family_room_page

              # Base track arc (full 60-85°F range, dark gray)
              - arc:
                  id: fr_therm_track_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 18
                  arc_color: 0x3A3A3A
                  clickable: false
                  adjustable: false
                  indicator:
                    arc_color: 0x3A3A3A
                    arc_width: 0
                  knob:
                    bg_color: 0x3A3A3A

              # Delta arc — fills from the lower of (current, target) to the higher
              - arc:
                  id: fr_therm_delta_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0xE06A2A
                    arc_width: 18
                  knob:
                    bg_color: 0x000000
                  clickable: false

              # Mask arc — covers track from arc start up to the lower of (current, target)
              - arc:
                  id: fr_therm_mask_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x8A3F1E
                    arc_width: 18
                  knob:
                    bg_color: 0x000000
                  clickable: false

              # Current temperature dot (small, white with orange border, read-only)
              - arc:
                  id: fr_therm_current_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x000000
                    arc_width: 0
                  knob:
                    bg_color: 0xFFFFFF
                    border_width: 2
                    border_color: 0xE06A2A
                  clickable: false

              # Target temperature dot (large, draggable — sets new setpoint)
              - arc:
                  id: fr_therm_target_arc
                  x: 65
                  y: 85
                  width: 350
                  height: 350
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x000000
                    arc_width: 0
                  knob:
                    bg_color: 0xFFFFFF
                    width: 40
                    height: 40
                    radius: 20
                    border_width: 4
                    border_color: 0xE06A2A
                  clickable: true
                  adjustable: true
                  on_value:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.family_room_thermostat
                          temperature: !lambda return (float)x;

              # HVAC mode label (Heating / Cooling / Idle / Off)
              - label:
                  id: fr_therm_mode_label
                  text: "..."
                  text_font: roboto19_font
                  text_color: 0xE06A2A
                  align: center
                  y: -70

              # Target temperature (large, center)
              - label:
                  id: fr_therm_target_label
                  text: "--°F"
                  text_font: roboto48_font
                  text_color: 0xE6E6E6
                  align: center

              # Current temperature row (icon + value, below center)
              - obj:
                  id: fr_therm_current_row
                  width: SIZE_CONTENT
                  height: SIZE_CONTENT
                  align: center
                  y: 55
                  bg_opa: TRANSP
                  border_width: 0
                  pad_all: 0
                  clickable: false
                  layout:
                    type: flex
                    flex_flow: row
                    flex_align_cross: center
                  widgets:
                    - label:
                        text: $thermometer
                        text_font: icon_font_small
                        text_color: 0xE06A2A
                        pad_right: 6
                    - label:
                        id: fr_therm_current_value
                        text: "--°F"
                        text_font: roboto19_font
                        text_color: 0xE06A2A

              # Down button (-1°F)
              - button:
                  id: fr_therm_down_btn
                  width: 70px
                  height: 70px
                  x: 160
                  y: 360
                  styles: control
                  radius: 35px
                  bg_opa: TRANSP
                  border_width: 2
                  border_color: 0x7A7A7A
                  widgets:
                    - label:
                        text: "-"
                        text_font: roboto44_font
                        align: center
                        text_color: 0xB0B0B0
                  on_click:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.family_room_thermostat
                          temperature: !lambda |-
                            if (id(fr_thermostat_target_temp).has_state()) {
                              return id(fr_thermostat_target_temp).state - 1.0f;
                            }
                            return 70.0f;

              # Up button (+1°F)
              - button:
                  id: fr_therm_up_btn
                  width: 70px
                  height: 70px
                  x: 260
                  y: 360
                  styles: control
                  radius: 35px
                  bg_opa: TRANSP
                  border_width: 2
                  border_color: 0x7A7A7A
                  widgets:
                    - label:
                        text: "+"
                        text_font: roboto44_font
                        align: center
                        text_color: 0xB0B0B0
                  on_click:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.family_room_thermostat
                          temperature: !lambda |-
                            if (id(fr_thermostat_target_temp).has_state()) {
                              return id(fr_thermostat_target_temp).state + 1.0f;
                            }
                            return 70.0f;

    # ===========================================================================
    # ALL THERMOSTATS PAGE - Circular arc temperature control
    # ===========================================================================
    - id: all_thermostats_page
      layout:
        type: flex
        flex_flow: column
      scrollbar_mode: "off"
      width: 100%
      height: 100%
      bg_color: 0x1E1E1E
      bg_opa: cover

      widgets:
        - obj:
            id: at_therm_root
            width: 100%
            height: 100%
            bg_opa: TRANSP
            border_width: 0
            pad_all: 0

            widgets:

              # Back button
              - button:
                  id: at_therm_back_btn
                  width: 60px
                  height: 60px
                  x: 5
                  y: 34
                  styles: control
                  widgets:
                    - label:
                        text_font: $icon_font
                        align: center
                        text: $chevron_left
                  on_click:
                    - lvgl.page.show: family_room_page

              # Base track arc (full 60-85°F range, dark gray)
              - arc:
                  id: at_therm_track_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 18
                  arc_color: 0x3A3A3A
                  clickable: false
                  adjustable: false
                  indicator:
                    arc_color: 0x3A3A3A
                    arc_width: 0
                  knob:
                    bg_color: 0x3A3A3A

              # Delta arc — fills from the lower of (current, target) to the higher
              - arc:
                  id: at_therm_delta_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0xE06A2A
                    arc_width: 18
                  knob:
                    bg_color: 0x000000
                  clickable: false

              # Mask arc — covers track from arc start up to the lower of (current, target)
              - arc:
                  id: at_therm_mask_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x8A3F1E
                    arc_width: 18
                  knob:
                    bg_color: 0x000000
                  clickable: false

              # Current temperature dot (small, white with orange border, read-only)
              - arc:
                  id: at_therm_current_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x000000
                    arc_width: 0
                  knob:
                    bg_color: 0xFFFFFF
                    border_width: 2
                    border_color: 0xE06A2A
                  clickable: false

              # Target temperature dot (large, draggable — sets new setpoint)
              - arc:
                  id: at_therm_target_arc
                  x: 65
                  y: 85
                  width: 350
                  height: 350
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x000000
                    arc_width: 0
                  knob:
                    bg_color: 0xFFFFFF
                    width: 40
                    height: 40
                    radius: 20
                    border_width: 4
                    border_color: 0xE06A2A
                  clickable: true
                  adjustable: true
                  on_value:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.all_thermostats
                          temperature: !lambda return (float)x;

              # HVAC mode label (Heating / Cooling / Idle / Off)
              - label:
                  id: at_therm_mode_label
                  text: "..."
                  text_font: roboto19_font
                  text_color: 0xE06A2A
                  align: center
                  y: -70

              # Target temperature (large, center)
              - label:
                  id: at_therm_target_label
                  text: "--°F"
                  text_font: roboto48_font
                  text_color: 0xE6E6E6
                  align: center

              # Current temperature row (icon + value, below center)
              - obj:
                  id: at_therm_current_row
                  width: SIZE_CONTENT
                  height: SIZE_CONTENT
                  align: center
                  y: 55
                  bg_opa: TRANSP
                  border_width: 0
                  pad_all: 0
                  clickable: false
                  layout:
                    type: flex
                    flex_flow: row
                    flex_align_cross: center
                  widgets:
                    - label:
                        text: $thermometer
                        text_font: icon_font_small
                        text_color: 0xE06A2A
                        pad_right: 6
                    - label:
                        id: at_therm_current_value
                        text: "--°F"
                        text_font: roboto19_font
                        text_color: 0xE06A2A

              # Down button (-1°F)
              - button:
                  id: at_therm_down_btn
                  width: 70px
                  height: 70px
                  x: 160
                  y: 360
                  styles: control
                  radius: 35px
                  bg_opa: TRANSP
                  border_width: 2
                  border_color: 0x7A7A7A
                  widgets:
                    - label:
                        text: "-"
                        text_font: roboto44_font
                        align: center
                        text_color: 0xB0B0B0
                  on_click:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.all_thermostats
                          temperature: !lambda |-
                            if (id(at_thermostat_target_temp).has_state()) {
                              return id(at_thermostat_target_temp).state - 1.0f;
                            }
                            return 70.0f;

              # Up button (+1°F)
              - button:
                  id: at_therm_up_btn
                  width: 70px
                  height: 70px
                  x: 260
                  y: 360
                  styles: control
                  radius: 35px
                  bg_opa: TRANSP
                  border_width: 2
                  border_color: 0x7A7A7A
                  widgets:
                    - label:
                        text: "+"
                        text_font: roboto44_font
                        align: center
                        text_color: 0xB0B0B0
                  on_click:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.all_thermostats
                          temperature: !lambda |-
                            if (id(at_thermostat_target_temp).has_state()) {
                              return id(at_thermostat_target_temp).state + 1.0f;
                            }
                            return 70.0f;

    # ===========================================================================
    # KITCHEN PAGE - Main Controls (3x3 grid)
    # ===========================================================================
    # [Lights]   [LEDs]       [Cabinets]
    # [Island]   [Thermostat] [Hall]
    # [← Back]   [ ]          [ ]
    # ===========================================================================
    - id: kitchen_page
      layout:
        type: grid
        grid_columns: [fr(1), fr(1), fr(1)]
        grid_rows: [fr(1), fr(1), fr(1)]
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # [0,0] Main Overhead Lights
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: kt_ceiling_lights_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  text: "Lights"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.kitchen_lights

        # [1,0] Under-Cabinet LEDs
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: kt_leds_btn
            styles: control
            grid_cell_column_pos: 1
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $led_strip
              - label:
                  align: bottom_left
                  text: "All LEDs"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.kitchen_leds

        # [2,0] Cabinet WLED LEDs
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: kt_cabinet_leds_btn
            styles: control
            grid_cell_column_pos: 2
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $led_strip_variant
              - label:
                  align: bottom_left
                  text: "Cabinets"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.kitchen_cabinet_leds

        # [0,1] Island WLED
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: kt_island_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 1
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $led_strip
              - label:
                  align: bottom_left
                  text: "Island"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.wled_kitchen_island

        # [1,1] Thermostat → kitchen thermostat sub-page
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: kt_thermostat_btn
            styles: control
            grid_cell_column_pos: 1
            grid_cell_row_pos: 1
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $thermometer
              - label:
                  align: bottom_left
                  text: "Thermostat"
            on_click:
              - lvgl.page.show: kitchen_thermostat_page

        # [2,1] Hall Light
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: kt_hall_btn
            styles: control
            grid_cell_column_pos: 2
            grid_cell_row_pos: 1
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  text: "Hall"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.kitchen_hall_light

        # [0,2] ← Back to Home
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: kt_back_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page

    # ===========================================================================
    # KITCHEN THERMOSTAT PAGE - Circular arc temperature control
    # ===========================================================================
    - id: kitchen_thermostat_page
      layout:
        type: flex
        flex_flow: column
      scrollbar_mode: "off"
      width: 100%
      height: 100%
      bg_color: 0x1E1E1E
      bg_opa: cover

      widgets:
        - obj:
            id: kt_therm_root
            width: 100%
            height: 100%
            bg_opa: TRANSP
            border_width: 0
            pad_all: 0

            widgets:

              - button:
                  id: kt_therm_back_btn
                  width: 60px
                  height: 60px
                  x: 5
                  y: 34
                  styles: control
                  widgets:
                    - label:
                        text_font: $icon_font
                        align: center
                        text: $chevron_left
                  on_click:
                    - lvgl.page.show: kitchen_page

              - arc:
                  id: kt_therm_track_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 18
                  arc_color: 0x3A3A3A
                  clickable: false
                  adjustable: false
                  indicator:
                    arc_color: 0x3A3A3A
                    arc_width: 0
                  knob:
                    bg_color: 0x3A3A3A

              - arc:
                  id: kt_therm_delta_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0xE06A2A
                    arc_width: 18
                  knob:
                    bg_color: 0x000000
                  clickable: false

              - arc:
                  id: kt_therm_mask_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x8A3F1E
                    arc_width: 18
                  knob:
                    bg_color: 0x000000
                  clickable: false

              - arc:
                  id: kt_therm_current_arc
                  x: 60
                  y: 80
                  width: 360
                  height: 360
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x000000
                    arc_width: 0
                  knob:
                    bg_color: 0xFFFFFF
                    border_width: 2
                    border_color: 0xE06A2A
                  clickable: false

              - arc:
                  id: kt_therm_target_arc
                  x: 65
                  y: 85
                  width: 350
                  height: 350
                  min_value: 60
                  max_value: 85
                  start_angle: 135
                  end_angle: 45
                  rotation: 0
                  value: 72
                  arc_width: 0
                  arc_color: 0x000000
                  indicator:
                    arc_color: 0x000000
                    arc_width: 0
                  knob:
                    bg_color: 0xFFFFFF
                    width: 40
                    height: 40
                    radius: 20
                    border_width: 4
                    border_color: 0xE06A2A
                  clickable: true
                  adjustable: true
                  on_value:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.kitchen
                          temperature: !lambda return (float)x;

              - label:
                  id: kt_therm_mode_label
                  text: "..."
                  text_font: roboto19_font
                  text_color: 0xE06A2A
                  align: center
                  y: -70

              - label:
                  id: kt_therm_target_label
                  text: "--°F"
                  text_font: roboto48_font
                  text_color: 0xE6E6E6
                  align: center

              - obj:
                  id: kt_therm_current_row
                  width: SIZE_CONTENT
                  height: SIZE_CONTENT
                  align: center
                  y: 55
                  bg_opa: TRANSP
                  border_width: 0
                  pad_all: 0
                  clickable: false
                  layout:
                    type: flex
                    flex_flow: row
                    flex_align_cross: center
                  widgets:
                    - label:
                        text: $thermometer
                        text_font: icon_font_small
                        text_color: 0xE06A2A
                        pad_right: 6
                    - label:
                        id: kt_therm_current_value
                        text: "--°F"
                        text_font: roboto19_font
                        text_color: 0xE06A2A

              - button:
                  id: kt_therm_down_btn
                  width: 70px
                  height: 70px
                  x: 160
                  y: 360
                  styles: control
                  radius: 35px
                  bg_opa: TRANSP
                  border_width: 2
                  border_color: 0x7A7A7A
                  widgets:
                    - label:
                        text: "-"
                        text_font: roboto44_font
                        align: center
                        text_color: 0xB0B0B0
                  on_click:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.kitchen
                          temperature: !lambda |-
                            if (id(kt_thermostat_target_temp).has_state()) {
                              return id(kt_thermostat_target_temp).state - 1.0f;
                            }
                            return 70.0f;

              - button:
                  id: kt_therm_up_btn
                  width: 70px
                  height: 70px
                  x: 260
                  y: 360
                  styles: control
                  radius: 35px
                  bg_opa: TRANSP
                  border_width: 2
                  border_color: 0x7A7A7A
                  widgets:
                    - label:
                        text: "+"
                        text_font: roboto44_font
                        align: center
                        text_color: 0xB0B0B0
                  on_click:
                    - homeassistant.service:
                        service: climate.set_temperature
                        data:
                          entity_id: climate.kitchen
                          temperature: !lambda |-
                            if (id(kt_thermostat_target_temp).has_state()) {
                              return id(kt_thermostat_target_temp).state + 1.0f;
                            }
                            return 70.0f;

    # ===========================================================================
    # DINING ROOM PAGE
    # ===========================================================================
    # [Ceiling~] [Table~]   [ ]
    # [ ]        [ ]        [ ]
    # [← Back]   [ ]        [ ]
    # ~ = has brightness slider
    # ===========================================================================
    - id: dining_room_page
      layout:
        type: grid
        grid_columns: [fr(1), fr(1), fr(1)]
        grid_rows: [fr(1), fr(1), fr(1)]
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # [0,0] Ceiling Lights (Z-Wave dimmer)
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: dr_ceiling_lights_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  y: -16
                  text: "Ceiling"
              - slider:
                  id: dr_ceiling_brightness_slider
                  align: bottom_mid
                  width: 100%
                  height: 10px
                  min_value: 1
                  max_value: 255
                  value: 128
                  bg_color: 0x505050
                  indicator:
                    bg_color: 0xE5E5E5
                  knob:
                    bg_color: 0xE5E5E5
                    width: 18px
                    height: 18px
                    radius: 9px
                  on_release:
                    - homeassistant.service:
                        service: light.turn_on
                        data:
                          entity_id: light.dining_room_ceiling_lights_node_5
                          brightness: !lambda return (int)x;
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.dining_room_ceiling_lights_node_5

        # [1,0] Table Light (Z-Wave dimmer)
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: dr_table_light_btn
            styles: control
            grid_cell_column_pos: 1
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $nightlight
              - label:
                  align: bottom_left
                  y: -16
                  text: "Table"
              - slider:
                  id: dr_table_brightness_slider
                  align: bottom_mid
                  width: 100%
                  height: 10px
                  min_value: 1
                  max_value: 255
                  value: 128
                  bg_color: 0x505050
                  indicator:
                    bg_color: 0xE5E5E5
                  knob:
                    bg_color: 0xE5E5E5
                    width: 18px
                    height: 18px
                    radius: 9px
                  on_release:
                    - homeassistant.service:
                        service: light.turn_on
                        data:
                          entity_id: light.dining_room_table_light_node_6
                          brightness: !lambda return (int)x;
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.dining_room_table_light_node_6

        # [0,2] ← Back to Home
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: dr_back_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page

    # ===========================================================================
    # LISA'S OFFICE PAGE
    # ===========================================================================
    - id: lisas_office_page
      layout:
        type: grid
        grid_columns: [fr(1), fr(1), fr(1)]
        grid_rows: [fr(1), fr(1), fr(1)]
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # [0,0] Office Light (Kasa smart switch)
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: lo_light_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  text: "Light"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.lisas_office_light

        # [0,2] ← Back to Home
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: lo_back_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page

    # ===========================================================================
    # FOYER PAGE
    # ===========================================================================
    # [Light~]   [ ]        [ ]
    # [ ]        [ ]        [ ]
    # [← Back]   [ ]        [ ]
    # ~ = has brightness slider
    # ===========================================================================
    - id: foyer_page
      layout:
        type: grid
        grid_columns: [fr(1), fr(1), fr(1)]
        grid_rows: [fr(1), fr(1), fr(1)]
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # [0,0] Foyer Light (Z-Wave dimmer)
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: fo_foyer_light_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  y: -16
                  text: "Light"
              - slider:
                  id: fo_foyer_brightness_slider
                  align: bottom_mid
                  width: 100%
                  height: 10px
                  min_value: 1
                  max_value: 255
                  value: 128
                  bg_color: 0x505050
                  indicator:
                    bg_color: 0xE5E5E5
                  knob:
                    bg_color: 0xE5E5E5
                    width: 18px
                    height: 18px
                    radius: 9px
                  on_release:
                    - homeassistant.service:
                        service: light.turn_on
                        data:
                          entity_id: light.foyer_light_node_13
                          brightness: !lambda return (int)x;
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.foyer_light_node_13

        # [0,2] ← Back to Home
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: fo_back_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page

    # ===========================================================================
    # DECK PAGE
    # ===========================================================================
    # [Flood~]   [ ]        [ ]
    # [ ]        [ ]        [ ]
    # [← Back]   [ ]        [ ]
    # ~ = has brightness slider
    # ===========================================================================
    - id: deck_page
      layout:
        type: grid
        grid_columns: [fr(1), fr(1), fr(1)]
        grid_rows: [fr(1), fr(1), fr(1)]
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # [0,0] Deck Flood Light (Z-Wave dimmer)
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: dk_flood_light_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  y: -16
                  text: "Flood"
              - slider:
                  id: dk_flood_brightness_slider
                  align: bottom_mid
                  width: 100%
                  height: 10px
                  min_value: 1
                  max_value: 255
                  value: 128
                  bg_color: 0x505050
                  indicator:
                    bg_color: 0xE5E5E5
                  knob:
                    bg_color: 0xE5E5E5
                    width: 18px
                    height: 18px
                    radius: 9px
                  on_release:
                    - homeassistant.service:
                        service: light.turn_on
                        data:
                          entity_id: light.deck_flood_light
                          brightness: !lambda return (int)x;
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.deck_flood_light

        # [0,2] ← Back to Home
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: dk_back_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page

    # ===========================================================================
    # PATIO PAGE
    # ===========================================================================
    # [Lights~]  [Xmas]     [ ]
    # [ ]        [ ]        [ ]
    # [← Back]   [ ]        [ ]
    # ~ = has brightness slider
    # ===========================================================================
    - id: patio_page
      layout:
        type: grid
        grid_columns: [fr(1), fr(1), fr(1)]
        grid_rows: [fr(1), fr(1), fr(1)]
      scrollbar_mode: "off"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # [0,0] Patio Wall Lights (dimmer)
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: pt_wall_lights_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lightbulb
              - label:
                  align: bottom_left
                  y: -16
                  text: "Lights"
              - slider:
                  id: pt_wall_brightness_slider
                  align: bottom_mid
                  width: 100%
                  height: 10px
                  min_value: 1
                  max_value: 255
                  value: 128
                  bg_color: 0x505050
                  indicator:
                    bg_color: 0xE5E5E5
                  knob:
                    bg_color: 0xE5E5E5
                    width: 18px
                    height: 18px
                    radius: 9px
                  on_release:
                    - homeassistant.service:
                        service: light.turn_on
                        data:
                          entity_id: light.patio_wall_lights
                          brightness: !lambda return (int)x;
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.patio_wall_lights

        # [1,0] Patio Christmas Lights (toggle only)
        - button:
            height: $button_height_single
            width: $button_width
            checkable: true
            id: pt_xmas_lights_btn
            styles: control
            grid_cell_column_pos: 1
            grid_cell_row_pos: 0
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $pine_tree
              - label:
                  align: bottom_left
                  text: "Xmas"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.patio_christmas_lights

        # [0,2] ← Back to Home
        - button:
            height: $button_height_single
            width: $button_width
            checkable: false
            id: pt_back_btn
            styles: control
            grid_cell_column_pos: 0
            grid_cell_row_pos: 2
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page
